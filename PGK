javascript:(function(){if(window.location.href.indexOf("buyertrade.taobao.com")<0){console.log("请在https://buyertrade.taobao.com/trade/itemlist/list_bought_items.htm页面下提取！");return}function getCookie(name){var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");if(arr=document.cookie.match(reg)){return unescape(arr[2])}else{return null}}if(getCookie("_m_h5_tk")==null){console.log("请打开m.taobao.com并登录后再操作!");return}var script=document.createElement("script");script.type="text/javascript";script.src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js";document.getElementsByTagName("head")[0].appendChild(script);setTimeout(function(){$.ajaxSettings.async=false;function getNowFormatDate(){var date=new Date();var year=date.getFullYear();var month=date.getMonth()+1;var strDate=date.getDate();if(month>=1&&month<=9){month="0"+month}if(strDate>=0&&strDate<=9){strDate="0"+strDate}var currentdate=year+"-"+month+"-"+strDate;return currentdate}var start_time=getNowFormatDate();var end_time=start_time;var get_orders_url="https://buyertrade.taobao.com/trade/itemlist/asyncBought.htm?action=itemlist/BoughtQueryAction&event_submit_do_query=1&_input_charset=utf8";var get_card_info_url="https://h5api.m.taobao.com/h5/mtop.vt.order.distribution.applecard.query/1.0/";var order_list=[];var card_info_str="";var card_info_json=[];var checkSeller=function(val){var sellers=["维缇手游专营店","长沙电信旗舰店","创想网游点卡专营店","onezero美承数码旗舰店"];for(var i in sellers){if(val==sellers[i]){return true}}return false};console.clear();console.log("Powered by Shinelin, 感谢杨大师提供的技术支持");console.log('输入: \r\n r1() 提取当天卡密(r1后面有括号)；\r\n r2(开始时间，结束时间)，格式:r2("2020-03-01","2020-03-04") 提取指定日期卡密');function sign(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,r,o,i,a;return o=2147483648&e,i=2147483648&t,n=1073741824&e,r=1073741824&t,a=(1073741823&e)+(1073741823&t),n&r?2147483648^a^o^i:n|r?1073741824&a?3221225472^a^o^i:1073741824^a^o^i:a^o^i}function r(e,t,n){return e&t|~e&n}function o(e,t,n){return e&n|t&~n}function i(e,t,n){return e^t^n}function a(e,t,n){return t^(e|~n)}function s(e,o,i,a,s,u,c){return e=n(e,n(n(r(o,i,a),s),c)),n(t(e,u),o)}function u(e,r,i,a,s,u,c){return e=n(e,n(n(o(r,i,a),s),c)),n(t(e,u),r)}function c(e,r,o,a,s,u,c){return e=n(e,n(n(i(r,o,a),s),c)),n(t(e,u),r)}function l(e,r,o,i,s,u,c){return e=n(e,n(n(a(r,o,i),s),c)),n(t(e,u),r)}function d(e){var t="",n="",r,o;for(o=0;o<=3;o++){r=e>>>8*o&255,n="0"+r.toString(16),t+=n.substr(n.length-2,2)}return t}var f=[],p,g,m,h,v,y,b,_,w,S=7,x=12,E=17,T=22,P=5,O=9,k=14,R=20,C=4,j=11,A=16,N=23,I=6,q=10,L=15,M=21;for(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(e),f=function(e){for(var t,n=e.length,r=n+8,o=16*((r-r%64)/64+1),i=new Array(o-1),a=0,s=0;s<n;){t=(s-s%4)/4,a=s%4*8,i[t]=i[t]|e.charCodeAt(s)<<a,s++}return t=(s-s%4)/4,a=s%4*8,i[t]=i[t]|128<<a,i[o-2]=n<<3,i[o-1]=n>>>29,i}(e),y=1732584193,b=4023233417,_=2562383102,w=271733878,p=0;p<f.length;p+=16){g=y,m=b,h=_,v=w,y=s(y,b,_,w,f[p+0],7,3614090360),w=s(w,y,b,_,f[p+1],12,3905402710),_=s(_,w,y,b,f[p+2],17,606105819),b=s(b,_,w,y,f[p+3],22,3250441966),y=s(y,b,_,w,f[p+4],7,4118548399),w=s(w,y,b,_,f[p+5],12,1200080426),_=s(_,w,y,b,f[p+6],17,2821735955),b=s(b,_,w,y,f[p+7],22,4249261313),y=s(y,b,_,w,f[p+8],7,1770035416),w=s(w,y,b,_,f[p+9],12,2336552879),_=s(_,w,y,b,f[p+10],17,4294925233),b=s(b,_,w,y,f[p+11],22,2304563134),y=s(y,b,_,w,f[p+12],7,1804603682),w=s(w,y,b,_,f[p+13],12,4254626195),_=s(_,w,y,b,f[p+14],17,2792965006),b=s(b,_,w,y,f[p+15],22,1236535329),y=u(y,b,_,w,f[p+1],5,4129170786),w=u(w,y,b,_,f[p+6],9,3225465664),_=u(_,w,y,b,f[p+11],14,643717713),b=u(b,_,w,y,f[p+0],20,3921069994),y=u(y,b,_,w,f[p+5],5,3593408605),w=u(w,y,b,_,f[p+10],9,38016083),_=u(_,w,y,b,f[p+15],14,3634488961),b=u(b,_,w,y,f[p+4],20,3889429448),y=u(y,b,_,w,f[p+9],5,568446438),w=u(w,y,b,_,f[p+14],9,3275163606),_=u(_,w,y,b,f[p+3],14,4107603335),b=u(b,_,w,y,f[p+8],20,1163531501),y=u(y,b,_,w,f[p+13],5,2850285829),w=u(w,y,b,_,f[p+2],9,4243563512),_=u(_,w,y,b,f[p+7],14,1735328473),b=u(b,_,w,y,f[p+12],20,2368359562),y=c(y,b,_,w,f[p+5],4,4294588738),w=c(w,y,b,_,f[p+8],11,2272392833),_=c(_,w,y,b,f[p+11],16,1839030562),b=c(b,_,w,y,f[p+14],23,4259657740),y=c(y,b,_,w,f[p+1],4,2763975236),w=c(w,y,b,_,f[p+4],11,1272893353),_=c(_,w,y,b,f[p+7],16,4139469664),b=c(b,_,w,y,f[p+10],23,3200236656),y=c(y,b,_,w,f[p+13],4,681279174),w=c(w,y,b,_,f[p+0],11,3936430074),_=c(_,w,y,b,f[p+3],16,3572445317),b=c(b,_,w,y,f[p+6],23,76029189),y=c(y,b,_,w,f[p+9],4,3654602809),w=c(w,y,b,_,f[p+12],11,3873151461),_=c(_,w,y,b,f[p+15],16,530742520),b=c(b,_,w,y,f[p+2],23,3299628645),y=l(y,b,_,w,f[p+0],6,4096336452),w=l(w,y,b,_,f[p+7],10,1126891415),_=l(_,w,y,b,f[p+14],15,2878612391),b=l(b,_,w,y,f[p+5],21,4237533241),y=l(y,b,_,w,f[p+12],6,1700485571),w=l(w,y,b,_,f[p+3],10,2399980690),_=l(_,w,y,b,f[p+10],15,4293915773),b=l(b,_,w,y,f[p+1],21,2240044497),y=l(y,b,_,w,f[p+8],6,1873313359),w=l(w,y,b,_,f[p+15],10,4264355552),_=l(_,w,y,b,f[p+6],15,2734768916),b=l(b,_,w,y,f[p+13],21,1309151649),y=l(y,b,_,w,f[p+4],6,4149444226),w=l(w,y,b,_,f[p+11],10,3174756917),_=l(_,w,y,b,f[p+2],15,718787259),b=l(b,_,w,y,f[p+9],21,3951481745),y=n(y,g),b=n(b,m),_=n(_,h),w=n(w,v)
}return(d(y)+d(b)+d(_)+d(w)).toLowerCase()}var get_orders=function(){var finish=false;var bad_request=false;for(var page_num=1;page_num<100;page_num++){if(finish){break}$.post(get_orders_url,{"pageNum":page_num,"pageSize":15,"prePageNo":page_num-1},function(data){var obj=JSON.parse(data);var orders=obj.mainOrders;if(orders==null){bad_request=finish=true}for(var i in orders){var createDay=orders[i].orderInfo.createDay;var createTime=orders[i].orderInfo.createTime;var orderId=orders[i].orderInfo.id;if(createDay<start_time){finish=true}else{if(createDay>=start_time&&createDay<=end_time&&checkSeller(orders[i].seller.nick)){order_list.push({orderId:orderId,createTime:createTime})}}}})}if(bad_request){console.log("请求太频繁了，你把淘宝干坏了，晚点再试试吧!")}console.log(start_time+"---"+end_time+"期间共查询到"+order_list.length+"个订单")};var add_card_info=function(res,createTime){var card_info=res.data.data[0];card_info_str+=card_info.cardNo+","+card_info.cardPass+","+card_info.facePrice+", 下单时间:"+createTime+"\r\n";card_info_json.push({cardNo:card_info.cardNo,cardPass:card_info.cardPass,facePrice:card_info.facePrice})};var get_card_info=function(){var time=(new Date).getTime();for(var i in order_list){$.ajax({url:get_card_info_url,async:false,type:"GET",dataType:"txt",xhrFields:{withCredentials:true},data:{jsv:"2.4.5",appKey:"12574478",t:time,sign:sign(getCookie("_m_h5_tk").split("_")[0]+"&"+time+"&"+"12574478"+"&"+'{"tbOrderNo":"'+order_list[i].orderId+'"}'),api:"mtop.vt.order.distribution.applecard.query",v:"1.0",timeout:10000,AntiCreep:true,AntiFlood:true,type:"jsonp",dataType:"jsonp",callback:"add_card_info",preventFallback:true,data:'{"tbOrderNo":"'+order_list[i].orderId+'"}'},complete:function(res){eval(res.responseText.replace(")",",'"+order_list[i].createTime+"')"))}})}};window.r1=function(){order_list=[];card_info_str="";card_info_json=[];get_orders();console.log("卡密提取中!!! 请耐心等待……");get_card_info();console.log(card_info_str);console.log("------------------------按面值排序，方便报单--------------------------------------");sort();console.log('查询完成，继续查询请输入: \r\n r1() 提取当天卡密(r1后面有括号)；\r\n r2(开始时间，结束时间)，格式:r2("2020-03-01","2020-03-04") 提取指定日期卡密')};function DateMinus(sDate,eDate){var sdate=new Date(sDate.replace(/-/g,"/"));var edate=new Date(eDate.replace(/-/g,"/"));var days=sdate.getTime()-edate.getTime();var day=parseInt(days/(1000*60*60*24));return day}window.r2=function(st,ed){var regx=/^20\d{2}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/;if(st==null||ed==null||!regx.test(st)||!regx.test(ed)){console.log('请求日期错误！格式:r2("2020-03-01","2020-03-04")');return}var today=getNowFormatDate();if(st>ed||DateMinus(ed,st)>10||ed>today||DateMinus(today,st)>60){console.log("检查日期区间是否设定不符合实际！");return}start_time=st;end_time=ed;r1();start_time=end_time=getNowFormatDate};var sort=function(){card_info_json.sort(function(a,b){return a.facePrice-b.facePrice});var output="";var cnt=0;for(var i in card_info_json){if(0==i||card_info_json[i-1].facePrice!=card_info_json[i].facePrice){if(output!=""){console.log(output+"\r\n面额："+card_info_json[i-1].facePrice+"元，共计提取"+cnt+"张")}output="";cnt=0}output+=card_info_json[i].cardNo+" "+card_info_json[i].cardPass+"\r\n";cnt++}if(output!=""){console.log(output+"\r\n面额："+card_info_json[i].facePrice+"元，共计提取"+cnt+"张")}}},1000)})();
